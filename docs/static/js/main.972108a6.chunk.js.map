{"version":3,"sources":["js/RequestService.js","js/CardDeck.js","App.js","index.js"],"names":["baseUrl","requestService","url","fetch","then","resp","json","data","Promise","resolve","JSON","stringify","body","method","headers","name","this","_get","username","id","card","update","_post","CardPriority","FRESH","HIGH","MEDIUM","LOW","CardProbability","cardDeck","_cards","_user","find","prevChance","Object","keys","reduce","result","key","chance","Math","random","priority","getUser","user","Error","getAll","reject","curPriority","_getPriority","activeCard","filter","r","e","lastSeenAt","Date","now","curCard","_getCard","resCard","priorities","values","indexOf","delete","splice","parseInt","add","translations","example","push","ActionTypes","initState","cardTurned","reducer","state","action","type","useStyles","makeStyles","theme","root","width","window","innerWidth","height","innerHeight","display","gridTemplateRows","backgroundColor","palette","grey","justifySelf","alignSelf","overflow","cardContent","position","flexDirection","justifyContent","alignItems","fontSize","textAlign","marginTop","cardActions","bottom","rankButton","margin","rbFresh","error","dark","rbHigh","warning","main","rbMedium","success","rbLow","info","light","speedDial","right","login","editor","padding","editorActions","App","classes","useReducer","dispatch","useState","loginInput","setLoginInput","speedDialOpen","setSpeedDialOpen","stageDelete","setStageDelete","cardForEdit","setCardForEdit","getActiveCard","useCallback","catch","err","console","log","rankCard","event","stopPropagation","Button","variant","onClick","className","color","deleteCard","Fab","size","from","map","entry","index","TextField","label","value","onChange","prevState","target","fullWidth","to","updateCard","Card","CardContent","Typography","CardActions","SpeedDial","ariaLabel","hidden","icon","SpeedDialIcon","onClose","onOpen","open","direction","SpeedDialAction","tooltipTitle","init","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.972108a6.chunk.js","sourcesContent":["// const rootUrl = 'http://192.168.1.3:80';\nconst rootUrl = 'https://wolke.glencoden.de';\nconst baseUrl = `${rootUrl}/cards`;\n\n\nclass RequestService {\n    _get(url) {\n        return fetch(url).then(resp => resp.json());\n    }\n\n    _post(url, data) {\n        return Promise.resolve()\n            .then(() => JSON.stringify(data))\n            .then(body => fetch(url, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json; charset=utf-8' },\n                body\n            }))\n            .then(resp => resp.json());\n    }\n\n    getUser(name) {\n        return this._get(`${baseUrl}/user/${name}`);\n    }\n\n    getAll(username) {\n        return this._get(`${baseUrl}/all/${username}`);\n    }\n\n    delete(id) {\n        return this._get(`${baseUrl}/delete/${id}`);\n    }\n\n    add(card) {\n        return this.update(card);\n    }\n\n    update(card) {\n        return this._post(`${baseUrl}/upsert`, card);\n    }\n}\n\nexport const requestService = new RequestService();","import { requestService } from './RequestService';\n\nexport const CardPriority = {\n    FRESH: 'fresh',\n    HIGH: 'high',\n    MEDIUM: 'medium',\n    LOW: 'low'\n};\n\nconst CardProbability = {\n    [CardPriority.FRESH]: 1000,\n    [CardPriority.HIGH]: 3,\n    [CardPriority.MEDIUM]: 2,\n    [CardPriority.LOW]: 1\n};\n\n\nclass CardDeck {\n    _cards = [];\n    _user = '';\n\n    _getCard(id) {\n        return this._cards.find(card => card.id === id);\n    }\n\n    _getPriority() {\n        let prevChance = 0;\n        return Object.keys(CardProbability).reduce((result, key) => {\n            const chance = Math.random() * CardProbability[key];\n            if (chance <= prevChance || !this._cards.find(card => card.priority === key)) {\n                return result;\n            }\n            prevChance = chance;\n            return key;\n        }, '');\n    }\n\n    init(username) {\n        return requestService.getUser(username)\n            .then(resp => {\n                if (!resp.user) {\n                    throw new Error('wrong user name');\n                }\n                this._user = resp.user;\n                return requestService.getAll(this._user.name)\n            })\n            .then(resp => {\n                this._cards = resp;\n                return this._user;\n            });\n    }\n\n    getActiveCard() {\n        return new Promise((resolve, reject) => {\n            const curPriority = this._getPriority();\n            const activeCard = this._cards\n                .filter(card => card.priority === curPriority)\n                .reduce((r, e) => (r && (r.lastSeenAt < e.lastSeenAt)) ? r : e, null);\n            if (!activeCard) {\n                reject('no active card');\n                return;\n            }\n            activeCard.lastSeenAt = Date.now();\n            resolve(activeCard);\n        });\n    }\n\n    shuffleCards() {\n        // randomize lastSeenAt from cards.length numbers\n    }\n\n    rankCard(id, priority) {\n        const curCard = this._getCard(id);\n        const resCard = {\n            ...curCard,\n            priority\n        };\n        const priorities = Object.values(CardPriority);\n        if (priorities.indexOf(resCard.priority) < priorities.indexOf(curCard.priority)) {\n            resCard.lastSeenAt = 0;\n        }\n        return requestService.update(resCard)\n            .then(resp => {\n                curCard.priority = resp.priority;\n                curCard.lastSeenAt = resp.lastSeenAt;\n            });\n    }\n\n    deleteCard(id) {\n        return requestService.delete(id)\n            .then(resp => {\n                this._cards.splice(this._cards.indexOf(this._cards.find(card => card.id === parseInt(resp.id, 10))), 1);\n            });\n    }\n\n    updateCard(card) {\n        if (!card.id) {\n            return requestService.add({\n                user: this._user.name,\n                translations: card.translations,\n                example: card.example,\n                priority: CardPriority.FRESH,\n                lastSeenAt: Date.now()\n            })\n                .then(resp => {\n                    this._cards.push(resp);\n                });\n        }\n        const curCard = this._getCard(card.id);\n        if (!curCard) {\n            return Promise.reject('no card to update');\n        }\n        return requestService.update({\n            ...curCard,\n            translations: {\n                ...curCard.translations,\n                ...card.translations\n            },\n            example: card.example\n        })\n            .then(resp => {\n                curCard.translations = resp.translations;\n                curCard.example = resp.example;\n            });\n    }\n}\n\nexport const cardDeck = new CardDeck();","import { useReducer, useState, useCallback } from 'react';\nimport { cardDeck, CardPriority } from './js/CardDeck';\nimport { makeStyles, Card, CardContent, CardActions, Typography, Button, Fab, TextField } from '@material-ui/core';\nimport { SpeedDial, SpeedDialIcon, SpeedDialAction } from '@material-ui/lab';\n\n\n// adapter\n\nconst ActionTypes = {\n    SET_USER: 'set-user',\n    SET_CARD: 'set-card',\n    TURN_CARD: 'turn-card'\n};\n\nconst initState = {\n    user: null,\n    card: null,\n    cardTurned: false\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case ActionTypes.SET_USER:\n            return { ...state, user: action.user };\n        case ActionTypes.SET_CARD:\n            return { ...state, card: action.card, cardTurned: false };\n        case ActionTypes.TURN_CARD:\n            return { ...state, cardTurned: !state.cardTurned };\n        default:\n            return { ...state };\n    }\n};\n\n\n// ui\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: `${window.innerWidth}px`,\n        height: `${window.innerHeight}px`,\n        display: 'grid',\n        gridTemplateRows: 'auto 112px',\n        backgroundColor: theme.palette.grey['100']\n    },\n    card: {\n        width: '330px',\n        justifySelf: 'center',\n        alignSelf: 'center',\n        overflow: 'visible'\n    },\n    cardContent: {\n        position: 'relative',\n        height: '190px',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    translations: {\n        fontSize: '24px',\n        textAlign: 'center'\n    },\n    example: {\n        fontSize: '14px',\n        textAlign: 'center',\n        marginTop: '10px'\n    },\n    cardActions: {\n        position: 'absolute',\n        bottom: '-72px',\n        display: 'flex',\n        justifyContent: 'center'\n    },\n    rankButton: {\n        margin: '0 16px'\n    },\n    rbFresh: {\n        backgroundColor: theme.palette.error.dark\n    },\n    rbHigh: {\n        backgroundColor: theme.palette.warning.main\n    },\n    rbMedium: {\n        backgroundColor: theme.palette.success.main\n    },\n    rbLow: {\n        backgroundColor: theme.palette.info.light\n    },\n    speedDial: {\n        position: 'fixed',\n        right: '28px',\n        bottom: '28px'\n    },\n    login: {\n        width: '200px',\n        height: '150px',\n        justifySelf: 'center',\n        alignSelf: 'center',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n    },\n    editor: {\n        padding: '20px',\n        alignSelf: 'center'\n    },\n    editorActions: {\n        width: '210px',\n        justifySelf: 'center',\n        alignSelf: 'center',\n        display: 'flex',\n        justifyContent: 'space-between'\n    }\n}));\n\nfunction App() {\n    const classes = useStyles();\n    const [ state, dispatch ] = useReducer(reducer, initState);\n\n    const [ loginInput, setLoginInput ] = useState('');\n    const [ speedDialOpen, setSpeedDialOpen ] = useState(false);\n    const [ stageDelete, setStageDelete ] = useState(false);\n    const [ cardForEdit, setCardForEdit ] = useState(null);\n\n    const getActiveCard = useCallback(\n        () => {\n            cardDeck.getActiveCard()\n                .then(card => dispatch({ card, type: ActionTypes.SET_CARD }))\n                .catch(err => {\n                    console.log(err);\n                    dispatch({ card: null, type: ActionTypes.SET_CARD })\n                });\n        },\n        [ dispatch ]\n    );\n\n    const rankCard = useCallback(\n        (event, id, priority) => {\n            event.stopPropagation();\n            cardDeck.rankCard(id, priority)\n                .then(getActiveCard);\n        },\n        [ getActiveCard ]\n    );\n\n    let cardActions = null;\n\n    if (stageDelete) {\n        cardActions = (\n            <>\n                <Button\n                    key=\"clear\"\n                    variant=\"contained\"\n                    onClick={event => {\n                        event.stopPropagation();\n                        setStageDelete(false);\n                    }}\n                >\n                    <span className=\"material-icons\">clear</span>\n                </Button>\n                <Button\n                    key=\"delete\"\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={e => {\n                        e.stopPropagation();\n                        cardDeck.deleteCard(state.card.id)\n                            .then(() => {\n                                setStageDelete(false);\n                                getActiveCard();\n                            });\n                    }}\n                >\n                    <span className=\"material-icons\">delete</span>\n                </Button>\n            </>\n        );\n    } else if (state.cardTurned) {\n        cardActions = (\n            <>\n                <Fab key=\"rb-fresh\" className={`${classes.rankButton} ${classes.rbFresh}`} size=\"small\" onClick={event => rankCard(event, state.card.id, CardPriority.FRESH)} />\n                <Fab key=\"rb-high\" className={`${classes.rankButton} ${classes.rbHigh}`} size=\"small\" onClick={event => rankCard(event, state.card.id, CardPriority.HIGH)} />\n                <Fab key=\"rb-medium\" className={`${classes.rankButton} ${classes.rbMedium}`} size=\"small\" onClick={event => rankCard(event, state.card.id, CardPriority.MEDIUM)} />\n                <Fab key=\"rb-low\" className={`${classes.rankButton} ${classes.rbLow}`} size=\"small\" onClick={event => rankCard(event, state.card.id, CardPriority.LOW)} />\n            </>\n        );\n    }\n\n    if (!state.user) {\n        return (\n            <div className={classes.root}>\n                <div className={classes.login}>\n                    <TextField\n                        id=\"username\"\n                        label=\"Name\"\n                        margin=\"normal\"\n                        value={loginInput}\n                        onChange={event => setLoginInput(event.target.value)}\n                        fullWidth\n                    />\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={() => {\n                            cardDeck.init(loginInput)\n                                .then(user => dispatch({ type: ActionTypes.SET_USER, user }))\n                                .then(() => cardDeck.getActiveCard())\n                                .then(card => dispatch({ card, type: ActionTypes.SET_CARD }))\n                                .catch(err => console.log(err));\n                        }}\n                    >\n                        Fertig\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n\n    if (cardForEdit) {\n        return (\n            <div className={classes.root}>\n                <div className={classes.editor}>\n                    {Object.keys(cardForEdit.translations.from).map((entry, index) => (\n                        <TextField\n                            key={index}\n                            id={entry}\n                            label={entry}\n                            margin=\"normal\"\n                            value={cardForEdit.translations.from[entry]}\n                            onChange={event => setCardForEdit(prevState => ({\n                                ...prevState,\n                                translations: {\n                                    ...prevState.translations,\n                                    from: {\n                                        ...prevState.translations.from,\n                                        [entry]: event.target.value\n                                    }\n                                }\n                            }))}\n                            fullWidth\n                        />\n                    ))}\n                    {Object.keys(cardForEdit.translations.to).map((entry, index) => (\n                        <TextField\n                            key={index}\n                            id={entry}\n                            label={entry}\n                            margin=\"normal\"\n                            value={cardForEdit.translations.to[entry]}\n                            onChange={event => setCardForEdit(prevState => ({\n                                ...prevState,\n                                translations: {\n                                    ...prevState.translations,\n                                    to: {\n                                        ...prevState.translations.to,\n                                        [entry]: event.target.value\n                                    }\n                                }\n                            }))}\n                            fullWidth\n                        />\n                    ))}\n                    <TextField\n                        id=\"example\"\n                        label=\"Beispiel\"\n                        margin=\"normal\"\n                        value={cardForEdit.example}\n                        onChange={event => setCardForEdit(prevState => ({\n                            ...prevState,\n                            example: event.target.value\n                        }))}\n                        fullWidth\n                    />\n                </div>\n                <div className={classes.editorActions}>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => setCardForEdit(null)}\n                    >\n                        Abbrechen\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={() => {\n                            cardDeck.updateCard(cardForEdit)\n                                .then(() => {\n                                    getActiveCard();\n                                    setCardForEdit(null);\n                                })\n                        }}\n                    >\n                        Fertig\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n\n    console.log('APP', state.card);// TODO remove dev code\n\n    return (\n        <div className={classes.root}>\n            <Card\n                className={classes.card}\n                onClick={() => dispatch({ type: ActionTypes.TURN_CARD })}\n            >\n                {state.card && (\n                    <CardContent className={classes.cardContent}>\n                        {Object.values(state.cardTurned ? state.card.translations.to : state.card.translations.from).map((entry, index) => {\n                            if (!entry) {\n                                return null;\n                            }\n                            return (\n                                <Typography\n                                    key={index}\n                                    className={classes.translations}\n                                    variant=\"subtitle2\"\n                                >\n                                    {entry}\n                                </Typography>\n                            );\n                        })}\n                        {state.cardTurned && state.card.example && (\n                            <Typography\n                                className={classes.example}\n                                variant=\"caption\"\n                            >\n                                {state.card.example}\n                            </Typography>\n                        )}\n                        <CardActions className={classes.cardActions}>\n                            {cardActions}\n                        </CardActions>\n                    </CardContent>\n                )}\n            </Card>\n\n            <SpeedDial\n                className={classes.speedDial}\n                ariaLabel=\"SpeedDial\"\n                hidden={false}\n                icon={<SpeedDialIcon/>}\n                onClose={() => setSpeedDialOpen(false)}\n                onOpen={() => setSpeedDialOpen(true)}\n                open={speedDialOpen}\n                direction=\"up\"\n            >\n                <SpeedDialAction\n                    icon={<span className=\"material-icons\">add</span>}\n                    tooltipTitle=\"Neu\"\n                    onClick={() => {\n                        setCardForEdit({\n                            translations: {\n                                from: state.user.from.reduce((r, e) => ({ ...r, [e]: '' }), {}),\n                                to: state.user.to.reduce((r, e) => ({ ...r, [e]: '' }), {})\n                            },\n                            example: ''\n                        });\n                        setSpeedDialOpen(false);\n                    }}\n                />\n                <SpeedDialAction\n                    icon={<span className=\"material-icons\">edit</span>}\n                    tooltipTitle=\"Bearbeiten\"\n                    onClick={() => {\n                        if (state.card) {\n                            setCardForEdit(state.card);\n                        }\n                        setSpeedDialOpen(false);\n                    }}\n                />\n                <SpeedDialAction\n                    icon={<span className=\"material-icons\">delete</span>}\n                    tooltipTitle=\"LÃ¶schen\"\n                    onClick={() => {\n                        if (state.card) {\n                            setStageDelete(true);\n                        }\n                        setSpeedDialOpen(false);\n                    }}\n                />\n            </SpeedDial>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}